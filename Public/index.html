<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Page de l'ennui</title>

        <link rel="preload"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
            as="style"
            onload="this.onload=null;this.rel='stylesheet'">
        <noscript>
            <link rel="stylesheet"
                href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
        </noscript>

        <link rel="stylesheet" type="text/css" href="css/common.css" />
        <link rel="stylesheet" type="text/css" href="css/stage1.css" />
        <link rel="stylesheet" type="text/css" href="css/stage2.css" />
        <link rel="stylesheet" type="text/css" href="css/stage3.css" />
        <link rel="stylesheet" type="text/css" href="css/stage4.css" />
        <link rel="stylesheet" type="text/css" href="css/stage5.css" />
        <link rel="stylesheet" type="text/css" href="css/stage6.css" />
        <link rel="stylesheet" type="text/css" href="css/stage7.css" />
        <link rel="stylesheet" type="text/css" href="css/stage8.css" />
        <link rel="stylesheet" type="text/css" href="css/stage9.css" />

        <link rel="icon" type="img/png" href="imgs/icon_d.png"
            media="(prefers-color-scheme: dark)" />
        <link rel="icon" type="img/png" href="imgs/icon_l.png"
            media="(prefers-color-scheme: light)" />

        <script defer type="text/javascript" src="js/nav.js"></script>
        <script defer type="text/javascript" src="js/display_lb.js"></script>
        <script defer type="text/javascript" src="js/horloge.js"></script>

        <script defer src="/socket.io/socket.io.js"></script>
        <script defer type="module" src="js/main.js"></script>
        <script defer type="text/javascript" src="js/keys.js"></script>
    </head>

    <body>

        <section id="stage1">
            <button class="log-off"
                onclick="window.location.replace('/login');">Se
                déconnecter</button>
            <h1 class="display"></h1>
            <div class="keybind-wrap">
                <label for="keybind">Changer la touche de Pause</label>
                <input type="text" class="keybind" id="keybind"
                    placeholder="Touche" autocomplete="off"
                    maxlength="1" minlength="0" />

                <button class="keybind-submit">Appliquer</button>
            </div>
            <div class="show-nav">Afficher
                Navigation</div>
            <div class="btns-wrap">
                <button class="sec1">Clicker</button>
                <button class="sec2">Dino</button>
                <button class="sec3">Chat</button>
                <button class="sec4">Leaderboards</button>
                <button class="sec5">UNO</button>
                <button class="mario">Mario</button>
                <button class="sec6">Flappy bird</button>
                <button class="sec7">Pictionary</button>
                <button class="sec8">Puissance 4</button>
                <button class="sec9">Block Blast</button>
                <p class="hide-nav">Cacher</p>
            </div>

            <div class="zone-wrap">
                <div class="zone"></div>
                <p class="cps-humain"></p>
                <i class="acps"></i>
                <button class="reset">Reset</button>
            </div>

            <div class="medals-wrap" aria-label="Progression des médailles"
                role="group">
                <div data-name="Bronze" data-rank="1" class="medal hidden"
                    role="img"
                    aria-label="Médaille Bronze - Rang 1 - 2 500 clics requis"></div>
                <div data-name="Argent" data-rank="2" class="medal hidden"
                    role="img"
                    aria-label="Médaille Argent - Rang 2 - 5 000 clics requis"></div>
                <div data-name="Or" data-rank="3" class="medal hidden"
                    role="img"
                    aria-label="Médaille Or - Rang 3 - 10 000 clics requis"></div>
                <div data-name="Diamant" data-rank="4" class="medal hidden"
                    role="img"
                    aria-label="Médaille Diamant - Rang 4 - 20 000 clics requis"></div>
                <div data-name="Rubis" data-rank="5" class="medal hidden"
                    role="img"
                    aria-label="Médaille Rubis - Rang 5 - 40 000 clics requis"></div>
                <div data-name="Saphir" data-rank="6" class="medal hidden"
                    role="img"
                    aria-label="Médaille Saphir - Rang 6 - 80 000 clics requis"></div>
                <div data-name="Légendaire" data-rank="7" class="medal hidden"
                    role="img"
                    aria-label="Médaille Légendaire - Rang 7 - 160 000 clics requis"><span
                        class="medal-index" aria-hidden="true">7</span></div>
            </div>
        </section>

        <section id="stage2">
            <div class="dino-wrap">
                <canvas class="game"></canvas>
                <div class="dino-btns-wrap">
                    <button class="dino-start">Jouer</button>
                    <button class="dino-stop">Stop</button>
                    <button class="dino-reset">Reset</button>
                </div>
                <p class="pause-info"><i
                        class="fa-solid fa-lightbulb"></i>Appuyer sur <mark
                        id="keybind-mark"
                        style="background: #0f0!important; color: #000!important; padding: 7px 7px; text-align: center; display: inline-block;"></mark>
                    pour mettre en pause</p>
            </div>
        </section>

        <section id="stage3">
            <div class="chat-card" role="region" aria-label="Chat LAN">
                <div class="chat-header">
                    <h2>Chat.exe</h2>
                    <div class="chat-status">
                        <span id="me"></span>
                        <span id="usersCount"></span>
                    </div>
                </div>
                <div id="chat-messages" class="chat-messages"
                    aria-live="polite"></div>
                <form id="chat-form" autocomplete="off" autocorrect="off"
                    class="chat-form">
                    <textarea id="chat-input" rows="1"
                        placeholder="Écris ton message..."></textarea>
                    <button type="submit" title="Envoyer message"
                        class="submit"><i
                            class="fa-solid fa-circle-arrow-right"></i>

                    </button>
                </form>
            </div>
        </section>

        <section id="stage4">

            <div class="leaderboard-buttons">
                <button data-board="clicker">Clicker</button>
                <button data-board="dino">Dino</button>
                <button data-board="flappy">Flappy Bird</button>
                <button data-board="uno">UNO</button>
                <button data-board="pictionary">Pictionary</button>
                <button data-board="p4">Puissance 4</button>
                <button data-board="blockblast">Block Blast</button>
            </div>

            <center>
                <p class="info-leaderboard">Le premier du Leaderboard Dino
                    et
                    Flappy Bird à
                    la fin de chaque session obtiendra <mark
                        style="background: #0f0!important; color: #000!important; padding: 7px 7px; text-align: center; display: inline-block; text-decoration: underline; text-decoration-color: #000; text-decoration-thickness: 1.5px; text-underline-offset: 3px;">7500</mark>
                    Clicks
                    !</p>
            </center>

            <!--LEADERBOARD CLICKER-->
            <div class="leaderboard-card">
                <div class="leaderboard-header"><h2>Clicker
                        Leaderboard.exe</h2></div>
                <table class="board" id="clicker-leaderboard">
                    <thead><tr><th>Rang</th><th>Pseudo</th><th>Clicks</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
            <!--LEADERBOARD DINO-->
            <div class="leaderboard-card">
                <div class="leaderboard-header">
                    <h2>Dino Leaderboard.exe</h2></div>
                <table class="board" id="dino-leaderboard">
                    <thead><tr><th>Rang</th><th>Pseudo</th><th>Points</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
            <!-- LEADERBOARD FLAPPY -->
            <div class="leaderboard-card">
                <div class="leaderboard-header">
                    <h2>Flappy Leaderboard.exe</h2>
                </div>
                <table class="board" id="flappy-leaderboard">
                    <thead><tr><th>Rang</th><th>Pseudo</th><th>Points</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
            <!-- LEADERBOARD UNO -->
            <div class="leaderboard-card">
                <div class="leaderboard-header">
                    <h2>UNO Leaderboard.exe</h2>
                </div>
                <table class="board" id="uno-leaderboard">
                    <thead><tr><th>Rang</th><th>Pseudo</th><th>Victoires</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
            <!-- LEADERBOARD PICTIONARY -->
            <div class="leaderboard-card">
                <div class="leaderboard-header">
                    <h2>Pictionary Leaderboard.exe</h2>
                </div>
                <table class="board" id="pictionary-leaderboard">
                    <thead><tr><th>Rang</th><th>Pseudo</th><th>Points</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
            <!-- LEADERBOARD PUISSANCE 4 -->
            <div class="leaderboard-card">
                <div class="leaderboard-header">
                    <h2>Puissance 4 Leaderboard.exe</h2>
                </div>
                <table class="board" id="p4-leaderboard">
                    <thead><tr><th>Rang</th><th>Pseudo</th><th>Victoires</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
            <div class="leaderboard-card">
                <div class="leaderboard-header">
                    <h2>Block Blast Leaderboard.exe</h2>
                </div>
                <table class="board" id="blockblast-leaderboard">
                    <thead><tr><th>Rang</th><th>Pseudo</th><th>Score</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <section id="stage5">
            <div class="uno-card">
                <div class="uno-header">
                    <h2>UNO.exe</h2>
                    <div class="uno-status"></div>
                </div>

                <div class="uno-lobby">
                    <h3>Lobby UNO</h3>
                    <div class="uno-joueurs"></div>
                    <div class="uno-spectators"></div>
                    <div class="uno-btn-wrapper">
                        <button class="uno-rej">Rejoindre le lobby</button>
                        <button class="uno-quitter"
                            style="display: none;">Quitter le lobby</button>
                        <button class="uno-start-game"
                            style="display: none;">En
                            attente...</button>
                    </div>
                </div>

                <div class="uno-game">
                    <div class="uno-mode-spec"
                        style="display: none;"></div>
                    <div class="uno-adversaires"></div>

                    <div class="uno-ecran">
                        <div class="uno-pile">
                            <div>PIOCHE</div>
                        </div>
                        <div class="uno-discard"></div>
                    </div>

                    <div class="uno-deck"></div>
                    <div class="uno-info"></div>
                </div>

                <div class="uno-color-picker">
                    <h3>Choisis une couleur</h3>
                    <div class="uno-color-options"></div>
                </div>
            </div>
        </section>

        <section id="stage6">
            <div class="flappy-wrap">
                <canvas id="flappyCanvas" class="game"></canvas>
                <div class="flappy-btns-wrap">
                    <button class="flappyStartBtn">Jouer</button>
                    <button class="flappyStopBtn">Stop</button>
                    <button class="flappyResetBtn">Reset</button>
                </div>
                <p class="pause-info"><i
                        class="fa-solid fa-lightbulb"></i>Appuyer sur <mark
                        id="keybind-mark"
                        style="background: #0f0!important; color: #000!important; padding: 7px 7px; text-align: center; display: inline-block;"></mark>
                    pour mettre en pause</p>
            </div>
        </section>

        <section id="stage7">
            <div class="pictionary-card">
                <div class="pictionary-header">
                    <h2>Pictionary.exe</h2>
                    <div class="pictionary-status"></div>
                </div>

                <div class="pictionary-lobby">
                    <h3>Lobby Pictionary</h3>
                    <div class="pictionary-joueurs"></div>
                    <div class="pictionary-spectators"></div>
                    <div class="pictionary-actions">
                        <button class="pic-join">Rejoindre le lobby</button>
                        <button class="pic-leave"
                            style="display:none">Quitter
                            le lobby</button>
                        <button class="pic-start"
                            style="display:none">Démarrer</button>
                    </div>
                </div>

                <div class="pictionary-game">
                    <div class="pictionary-mode-spec"
                        style="display:none;"></div>
                    <div class="pictionary-info"></div>

                    <div class="pictionary-current">Dessinateur : <span
                            class="pictionary-current-player">?</span></div>

                    <div class="pictionary-players"></div>
                    <canvas class="pictionary-canvas" width="700"
                        height="450"></canvas>
                    <div class="pictionary-controls">
                        <div class="pictionary-toolbar" role="toolbar"
                            aria-label="Outils dessin">
                            <div class="pictionary-palette" role="group"
                                aria-label="Palette de couleurs">
                                <button
                                    style="background:#000;border:1.5px solid #fff"
                                    title="#000"
                                    aria-label="Couleur noir"></button>
                                <button style="background:#fff" title="#fff"
                                    aria-label="Couleur blanc"></button>
                                <button style="background:#f00" title="#f00"
                                    aria-label="Couleur rouge"></button>
                                <button style="background:#0f0" title="#0f0"
                                    aria-label="Couleur vert"></button>
                                <button style="background:#00f" title="#00f"
                                    aria-label="Couleur bleu"></button>
                                <button style="background:#ff0" title="#ff0"
                                    aria-label="Couleur jaune"></button>
                                <button style="background:#f0f" title="#f0f"
                                    aria-label="Couleur magenta"></button>
                            </div>

                            <label class="pictionary-color-label"
                                title="Choisir une couleur">
                                Couleur
                                <input type="color"
                                    class="pictionary-colorpicker"
                                    value="#ffffff"
                                    aria-label="Choisir la couleur" />
                            </label>

                            <label class="pictionary-brush-label"
                                title="Taille du crayon">

                                <input type="range"
                                    class="pictionary-brushsize"
                                    min="1" max="40" value="3"
                                    aria-label="Taille du pinceau" />
                            </label>

                            <button class="pictionary-eraser" title="Gomme"
                                aria-label="Gomme">Gomme</button>
                            <button class="pictionary-fill"
                                title="Remplissage"
                                aria-label="Remplissage">Remplissage</button>
                            <button class="pic-clear-btn"
                                title="Effacer le canevas"
                                aria-label="Effacer le canevas">Effacer</button>
                        </div>

                        <!-- Zone de proposition (visible seulement pour les devineurs) -->
                        <div class="pictionary-guess" role="group"
                            aria-label="Propositions de mot">
                            <input class="pic-guess-input"
                                placeholder="Devine le mot..."
                                aria-label="Champ de proposition" />
                            <button class="pic-guess-btn"
                                aria-label="Proposer le mot">Proposer</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="stage8">
            <div class="p4-card">
                <div class="p4-header">
                    <h2>Puissance 4.exe</h2>
                    <div class="p4-status"></div>
                </div>

                <div class="p4-lobby">
                    <h3>Lobby Puissance 4</h3>
                    <div class="p4-joueurs"></div>
                    <div class="p4-spectators"></div>
                    <div class="p4-btn-wrapper">
                        <button class="p4-join">Rejoindre le lobby</button>
                        <button class="p4-leave"
                            style="display: none;">Quitter
                            le lobby</button>
                        <button class="p4-start" style="display: none;">En
                            attente...</button>
                    </div>
                </div>

                <div class="p4-game">
                    <div class="p4-info"></div>
                    <div class="p4-board-container">
                        <div class="p4-board"></div>
                    </div>
                    <div class="p4-mode-spec" style="display: none;"></div>
                </div>
            </div>
        </section>
        <section id="stage9">
            <div class="blockblast-wrap">
                <div class="blockblast-header">
                    <h2>Block Blast.exe</h2>
                    <div class="blockblast-score">Score: 0</div>
                </div>

                <div class="blockblast-grid"></div>

                <div class="blockblast-pieces"></div>

                <div class="blockblast-info">
                    <i class="fa-solid fa-lightbulb"></i> Tu peux drag la
                    pièce
                    sur
                    la
                    grille ou simplement cliquer dessus puis cliquer sur
                    l'emplacement où tu veux la placer sur la grille
                </div>

                <div class="blockblast-controls">
                    <button class="blockblast-reset">Reset Score</button>
                </div>
            </div>

            <div class="blockblast-gameover">
                <h2>GAME OVER</h2>
                <p>Score final: <span
                        class="blockblast-gameover-score">0</span></p>
                <button class="blockblast-restart">Rejouer</button>
            </div>
        </section>

    </body>

    <script defer>
                (function () {
                    function protectZone() {
                        const z = document.querySelector('.zone');
                        if (!z) return;

                        const blocker = function () { return 'Action bloquée'; };

                        const captureHandler = function (e) {
                            if (!e.isTrusted) {
                                try { e.stopImmediatePropagation(); } catch (ie) {}
                                e.preventDefault();
                                console.warn('Clic synthétique bloqué sur .zone');
                            }
                        };

                        const bubbleHandler = function (e) {
                            e.preventDefault();
                        };

                        try {
                            Object.defineProperty(z, 'onclick', {
                                configurable: false,
                                writable: false,
                                value: blocker
                            });
                        } catch (err) {
                             
                        }

                        try {
                            if (!z.__zone_protection) {
                                z.addEventListener('click', bubbleHandler, false);
                                z.addEventListener('click', captureHandler, true);
                                z.__zone_protection = { captureHandler: captureHandler, bubbleHandler: bubbleHandler, blocker: blocker };
                            }
                        } catch (err) {
                        }

                        try {
                            if (z.onclick !== blocker) {
                                try {
                                    Object.defineProperty(z, 'onclick', {
                                        configurable: false,
                                        writable: false,
                                        value: blocker
                                    });
                                } catch (err) {
                                    z.onclick = blocker;
                                }
                            }
                        } catch (err) {
                        }
                    }

                    setTimeout(function () {
                        protectZone();

                        const observer = new MutationObserver(function (mutations) {
                            protectZone();
                        });
                        observer.observe(document.documentElement || document.body, { childList: true, subtree: true, attributes: true });

                        const periodic = setInterval(protectZone, 1500);

                        window.addEventListener('beforeunload', function () { observer.disconnect(); clearInterval(periodic); });
                    }, 400);
                })();
                </script>

</html>